{"lines":["----","","","Perfect! Now I understand how it works. The message headers have extmarks with `virt_text` where the first element contains the icon (either `header_user` or `header_assistant`). Let me check the output_window module to understand the extmark namespace:","","**  run** `Find extmark namespace usage`","","`````bash","> rg \"nvim_buf_get_extmarks|ns_id\" /Users/cam/Dev/neovim-dev/opencode.nvim/lua/opencode/ui/output_window.lua -B 2 -A 2","","`````","","----","","","  Permission Required","","  *bash* Find extmark namespace usage","> `rg \"nvim_buf_get_extmarks|ns_id\" /Users/cam/Dev/neovim-dev/opencode.nvim/lua/opencode/ui/output_window.lua -B 2 -A 2`","","    1. Allow once ","    2. Reject","    3. Allow always","","Navigate: `j`/`k` or `↑`/`↓`  Select: `<CR>` or `1-3`","",""],"extmarks":[[1,1,0,{"virt_text_hide":false,"virt_text":[[" ","OpencodeMessageRoleAssistant"],[" "],["PLAN","OpencodeMessageRoleAssistant"],[" claude-sonnet-4.5","OpencodeHint"],[" (2025-10-16 04:27:36)","OpencodeHint"],[" [msg_9eb45fbe60020xE560OGH3Vdoo]","OpencodeHint"]],"virt_text_repeat_linebreak":false,"ns_id":3,"virt_text_win_col":-3,"priority":10,"virt_text_pos":"win_col","right_gravity":true}],[2,5,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodeToolBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-1,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[3,6,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodeToolBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-1,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[4,7,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodeToolBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-1,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[5,8,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodeToolBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-1,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[6,9,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodeToolBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-1,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[7,10,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodeToolBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-1,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[8,13,0,{"virt_text_hide":false,"virt_text":[[" ","OpencodeMessageRoleSystem"],[" "],["SYSTEM","OpencodeMessageRoleSystem"],["","OpencodeHint"],["","OpencodeHint"],[" [permission-display-message]","OpencodeHint"]],"virt_text_repeat_linebreak":false,"ns_id":3,"virt_text_win_col":-3,"priority":10,"virt_text_pos":"win_col","right_gravity":true}],[9,15,0,{"ns_id":3,"priority":4096,"right_gravity":true,"line_hl_group":"OpencodePermissionTitle"}],[10,15,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[11,16,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[12,17,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[13,18,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[14,19,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[15,20,0,{"ns_id":3,"priority":4096,"right_gravity":true,"line_hl_group":"OpencodeDialogOptionHover"}],[16,20,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[17,20,2,{"virt_text_hide":false,"virt_text":[["› ","OpencodeDialogOptionHover"]],"virt_text_repeat_linebreak":false,"ns_id":3,"priority":4096,"virt_text_pos":"overlay","right_gravity":true}],[18,21,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[19,22,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[20,23,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}],[21,24,0,{"virt_text_hide":false,"virt_text":[["▌","OpencodePermissionBorder"]],"virt_text_repeat_linebreak":true,"ns_id":3,"virt_text_win_col":-2,"priority":4096,"virt_text_pos":"win_col","right_gravity":true}]],"actions":[]}