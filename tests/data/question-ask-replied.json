[
  {
    "type": "session.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437382680, "updated": 1769437382680 },
        "title": "New session - 2026-01-26T14:23:02.680Z",
        "version": "1.1.31",
        "projectID": "29d43526f88157cd4edd071b899dd01f240b771b",
        "slug": "sunny-planet",
        "id": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "directory": "/home/francis/Projects/_nvim/opencode.nvim"
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "model": { "providerID": "github-copilot", "modelID": "gpt-4.1" },
        "time": { "created": 1769437392705 },
        "role": "user",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "msg_bfaafef41001700DjtCwvhFxse",
        "agent": "build"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "synthetic": true,
        "text": "Called the Read tool with the following input: {\"filePath\":\"/home/francis/Projects/_nvim/opencode.nvim/tests/replay/renderer_spec.lua\"}",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfaafef42002jckWu6xA2ZV3zg",
        "messageID": "msg_bfaafef41001700DjtCwvhFxse"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "synthetic": true,
        "text": "<file>\n00001| local state = require('opencode.state')\n00002| local ui = require('opencode.ui.ui')\n00003| local helpers = require('tests.helpers')\n00004| local output_window = require('opencode.ui.output_window')\n00005| local assert = require('luassert')\n00006| local config = require('opencode.config')\n00007| \n00008| local function assert_output_matches(expected, actual, name)\n00009|   local normalized_extmarks = helpers.normalize_namespace_ids(actual.extmarks)\n00010| \n00011|   assert.are.equal(\n00012|     #expected.lines,\n00013|     #actual.lines,\n00014|     string.format(\n00015|       'Line count mismatch: expected %d, got %d.\\nFirst difference at index %d:\\n  Expected: %s\\n  Actual: %s',\n00016|       #expected.lines,\n00017|       #actual.lines,\n00018|       math.min(#expected.lines, #actual.lines) + 1,\n00019|       vim.inspect(expected.lines[math.min(#expected.lines, #actual.lines) + 1]),\n00020|       vim.inspect(actual.lines[math.min(#expected.lines, #actual.lines) + 1])\n00021|     )\n00022|   )\n00023| \n00024|   for i = 1, #expected.lines do\n00025|     assert.are.equal(\n00026|       expected.lines[i],\n00027|       actual.lines[i],\n00028|       string.format(\n00029|         'Line %d mismatch:\\n  Expected: %s\\n  Actual: %s',\n00030|         i,\n00031|         vim.inspect(expected.lines[i]),\n00032|         vim.inspect(actual.lines[i])\n00033|       )\n00034|     )\n00035|   end\n00036| \n00037|   assert.are.equal(\n00038|     #expected.extmarks,\n00039|     #normalized_extmarks,\n00040|     string.format(\n00041|       'Extmark count mismatch: expected %d, got %d.\\nFirst difference at index %d:\\n  Expected: %s\\n  Actual: %s',\n00042|       #expected.extmarks,\n00043|       #normalized_extmarks,\n00044|       math.min(#expected.extmarks, #normalized_extmarks) + 1,\n00045|       vim.inspect(expected.extmarks[math.min(#expected.extmarks, #normalized_extmarks) + 1]),\n00046|       vim.inspect(normalized_extmarks[math.min(#expected.extmarks, #normalized_extmarks) + 1])\n00047|     )\n00048|   )\n00049| \n00050|   for i = 1, #expected.extmarks do\n00051|     assert.are.same(\n00052|       expected.extmarks[i],\n00053|       normalized_extmarks[i],\n00054|       string.format(\n00055|         'Extmark %d mismatch:\\n  Expected: %s\\n  Actual: %s',\n00056|         i,\n00057|         vim.inspect(expected.extmarks[i]),\n00058|         vim.inspect(normalized_extmarks[i])\n00059|       )\n00060|     )\n00061|   end\n00062| \n00063|   local expected_action_count = expected.actions and #expected.actions or 0\n00064|   local actual_action_count = actual.actions and #actual.actions or 0\n00065| \n00066|   assert.are.equal(\n00067|     expected_action_count,\n00068|     actual_action_count,\n00069|     string.format('Action count mismatch: expected %d, got %d', expected_action_count, actual_action_count)\n00070|   )\n00071| \n00072|   if expected.actions then\n00073|     -- Sort both arrays for consistent comparison since order doesn't matter\n00074|     local function sort_actions(actions)\n00075|       local sorted = vim.deepcopy(actions)\n00076|       table.sort(sorted, function(a, b)\n00077|         return vim.inspect(a) < vim.inspect(b)\n00078|       end)\n00079|       return sorted\n00080|     end\n00081| \n00082|     assert.same(\n00083|       sort_actions(expected.actions),\n00084|       sort_actions(actual.actions),\n00085|       string.format(\n00086|         'Actions mismatch:\\n  Expected: %s\\n  Actual: %s',\n00087|         vim.inspect(expected.actions),\n00088|         vim.inspect(actual.actions)\n00089|       )\n00090|     )\n00091|   end\n00092| end\n00093| \n00094| describe('renderer unit tests', function()\n00095|   local event_subscriptions = {\n00096|     'session.updated',\n00097|     'session.compacted',\n00098|     'session.error',\n00099|     'message.updated',\n00100|     'message.removed',\n00101|     'message.part.updated',\n00102|     'message.part.removed',\n00103|     'permission.updated',\n00104|     'permission.replied',\n00105|     'question.replied',\n00106|     'question.asked',\n00107|     'file.edited',\n00108|     'custom.restore_point.created',\n00109|     'custom.emit_events.finished',\n00110|   }\n00111| \n00112|   before_each(function()\n00113|     require('opencode.event_manager').setup()\n00114|   end)\n00115| \n00116|   it('subsribes to events correctly', function()\n00117|     local renderer = require('opencode.ui.renderer')\n00118|     local event_manager = state.event_manager\n00119| \n00120|     event_manager.events = {}\n00121| \n00122|     renderer.setup_subscriptions()\n00123| \n00124|     for _, event_name in ipairs(event_subscriptions) do\n00125|       assert.is_true(\n00126|         event_manager.events[event_name] ~= nil,\n00127|         string.format('Renderer did not subscribe to event: %s', event_name)\n00128|       )\n00129|     end\n00130|   end)\n00131| \n00132|   it('unsubsribes from events correctly', function()\n00133|     local renderer = require('opencode.ui.renderer')\n00134|     local event_manager = state.event_manager\n00135| \n00136|     renderer.setup_subscriptions()\n00137| \n00138|     renderer.setup_subscriptions(false)\n00139| \n00140|     for _, event_name in ipairs(event_subscriptions) do\n00141|       assert.is_true(\n00142|         vim.tbl_isempty(event_manager.events[event_name]),\n00143|         string.format('Renderer did not unsubscribe from event: %s', event_name)\n00144|       )\n00145|     end\n00146|   end)\n00147| end)\n00148| \n00149| describe('renderer functional tests', function()\n00150|   config.debug.show_ids = true\n00151| \n00152|   before_each(function()\n00153|     helpers.replay_setup()\n00154|   end)\n00155| \n00156|   after_each(function()\n00157|     if state.windows then\n00158|       ui.close_windows(state.windows)\n00159|     end\n00160|   end)\n00161| \n00162|   local json_files = vim.fn.glob('tests/data/*.json', false, true)\n00163| \n00164|   -- Don't do the full session test on these files, usually\n00165|   -- because they involve permission prompts\n00166|   local skip_full_session = {\n00167|     'permission-prompt',\n00168|     'permission-ask-new',\n00169|     'question-ask',\n00170|     'shifting-and-multiple-perms',\n00171|     'message-removal',\n00172|   }\n00173| \n00174|   for _, filepath in ipairs(json_files) do\n00175|     local name = vim.fn.fnamemodify(filepath, ':t:r')\n00176| \n00177|     if not name:match('%.expected$') then\n00178|       local expected_path = 'tests/data/' .. name .. '.expected.json'\n00179| \n00180|       if vim.fn.filereadable(expected_path) == 1 then\n00181|         for i = 1, 2 do\n00182|           config.ui.output.rendering.event_collapsing = i == 1 and true or false\n00183|           it(\n00184|             'replays '\n00185|               .. name\n00186|               .. ' correctly (event-by-event, '\n00187|               .. (config.ui.output.rendering.event_collapsing and 'collapsing' or 'no collapsing')\n00188|               .. ')',\n00189|             function()\n00190|               local events = helpers.load_test_data(filepath)\n00191|               state.active_session = helpers.get_session_from_events(events)\n00192|               local expected = helpers.load_test_data(expected_path)\n00193| \n00194|               helpers.replay_events(events)\n00195|               vim.wait(1000, function()\n00196|                 return vim.tbl_isempty(state.event_manager.throttling_emitter.queue)\n00197|               end)\n00198| \n00199|               local actual = helpers.capture_output(state.windows and state.windows.output_buf, output_window.namespace)\n00200|               assert_output_matches(expected, actual, name)\n00201|             end\n00202|           )\n00203|         end\n00204| \n00205|         if not vim.tbl_contains(skip_full_session, name) then\n00206|           it('replays ' .. name .. ' correctly (session)', function()\n00207|             local renderer = require('opencode.ui.renderer')\n00208|             local events = helpers.load_test_data(filepath)\n00209|             state.active_session = helpers.get_session_from_events(events, true)\n00210|             local expected = helpers.load_test_data(expected_path)\n00211| \n00212|             local session_data = helpers.load_session_from_events(events)\n00213|             renderer._render_full_session_data(session_data)\n00214| \n00215|             local actual = helpers.capture_output(state.windows and state.windows.output_buf, output_window.namespace)\n00216|             assert_output_matches(expected, actual, name)\n00217|           end)\n00218|         end\n00219|       end\n00220|     end\n00221|   end\n00222| end)\n00223| \n\n(End of file - total 223 lines)\n</file>",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfaafef47001HR3fZ3Ct7nScuT",
        "messageID": "msg_bfaafef41001700DjtCwvhFxse"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "file",
        "messageID": "msg_bfaafef41001700DjtCwvhFxse",
        "url": "file:///home/francis/Projects/_nvim/opencode.nvim/tests/replay/renderer_spec.lua",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "filename": "tests/replay/renderer_spec.lua",
        "id": "prt_bfaafef47002OES5db7H5px77j",
        "mime": "text/plain"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "text": "can you use the question tool and ask me a question with an other choice",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfaafef42001XawiVVGpNU0t5E",
        "messageID": "msg_bfaafef41001700DjtCwvhFxse"
      }
    }
  },
  {
    "type": "session.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437382680, "updated": 1769437392735 },
        "title": "New session - 2026-01-26T14:23:02.680Z",
        "version": "1.1.31",
        "projectID": "29d43526f88157cd4edd071b899dd01f240b771b",
        "slug": "sunny-planet",
        "id": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "directory": "/home/francis/Projects/_nvim/opencode.nvim"
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437392819 },
        "modelID": "gpt-4.1",
        "providerID": "github-copilot",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "mode": "build",
        "cost": 0,
        "role": "assistant",
        "tokens": { "input": 0, "output": 0, "reasoning": 0, "cache": { "read": 0, "write": 0 } },
        "path": {
          "root": "/home/francis/Projects/_nvim/opencode.nvim",
          "cwd": "/home/francis/Projects/_nvim/opencode.nvim"
        },
        "parentID": "msg_bfaafef41001700DjtCwvhFxse",
        "id": "msg_bfaafefb3001iBSmqfzFffDjCS",
        "agent": "build"
      }
    }
  },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "model": { "providerID": "github-copilot", "modelID": "gpt-4.1" },
        "time": { "created": 1769437392705 },
        "role": "user",
        "summary": { "diffs": [] },
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "msg_bfaafef41001700DjtCwvhFxse",
        "agent": "build"
      }
    }
  },
  {
    "type": "session.updated",
    "properties": {
      "info": {
        "projectID": "29d43526f88157cd4edd071b899dd01f240b771b",
        "time": { "created": 1769437382680, "updated": 1769437392883 },
        "title": "New session - 2026-01-26T14:23:02.680Z",
        "version": "1.1.31",
        "directory": "/home/francis/Projects/_nvim/opencode.nvim",
        "slug": "sunny-planet",
        "id": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "summary": { "deletions": 0, "additions": 0, "files": 0 }
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "step-start",
        "snapshot": "617ad65111b912d010a8ea89957a9c5986bc54f0",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfaaff532001RIiCvjxiMht1EK",
        "messageID": "msg_bfaafefb3001iBSmqfzFffDjCS"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "tool",
        "callID": "call_b4hwTxyb1alO8r2uMlxeB873",
        "tool": "question",
        "state": { "status": "pending", "raw": "", "input": {} },
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfaaff539001jCeh626xIXgw9u",
        "messageID": "msg_bfaafefb3001iBSmqfzFffDjCS"
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "question.asked",
    "properties": {
      "questions": [
        {
          "question": "What is your favorite color?",
          "header": "Choose your preferred color",
          "options": [
            { "description": "A bold, vibrant choice for those who like attention.", "label": "Red" },
            { "description": "A calm, reliable color suitable for most environments.", "label": "Blue" },
            { "description": "Symbolizes growth, harmony, and renewal.", "label": "Green" },
            { "description": "Type your own favorite color.", "label": "Other" }
          ]
        }
      ],
      "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
      "tool": { "messageID": "msg_bfaafefb3001iBSmqfzFffDjCS", "callID": "call_b4hwTxyb1alO8r2uMlxeB873" },
      "id": "que_bfaaff9cc001DnGuMPilJYG9ya"
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "tool",
        "callID": "call_b4hwTxyb1alO8r2uMlxeB873",
        "tool": "question",
        "state": {
          "status": "running",
          "time": { "start": 1769437395404 },
          "input": {
            "questions": [
              {
                "question": "What is your favorite color?",
                "header": "Choose your preferred color",
                "options": [
                  { "description": "A bold, vibrant choice for those who like attention.", "label": "Red" },
                  { "description": "A calm, reliable color suitable for most environments.", "label": "Blue" },
                  { "description": "Symbolizes growth, harmony, and renewal.", "label": "Green" },
                  { "description": "Type your own favorite color.", "label": "Other" }
                ]
              }
            ]
          }
        },
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfaaff539001jCeh626xIXgw9u",
        "messageID": "msg_bfaafefb3001iBSmqfzFffDjCS"
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "model": { "providerID": "github-copilot", "modelID": "gpt-4.1" },
        "time": { "created": 1769437392705 },
        "role": "user",
        "summary": { "title": "Question with Other choice", "diffs": [] },
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "msg_bfaafef41001700DjtCwvhFxse",
        "agent": "build"
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "question.replied",
    "properties": {
      "answers": [["Red"]],
      "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
      "requestID": "que_bfaaff9cc001DnGuMPilJYG9ya"
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "tool",
        "callID": "call_b4hwTxyb1alO8r2uMlxeB873",
        "tool": "question",
        "state": {
          "metadata": { "answers": [["Red"]], "truncated": false },
          "time": { "start": 1769437395404, "end": 1769437402416 },
          "title": "Asked 1 question",
          "status": "completed",
          "output": "User has answered your questions: \"What is your favorite color?\"=\"Red\". You can now continue with the user's answers in mind.",
          "input": {
            "questions": [
              {
                "question": "What is your favorite color?",
                "header": "Choose your preferred color",
                "options": [
                  { "description": "A bold, vibrant choice for those who like attention.", "label": "Red" },
                  { "description": "A calm, reliable color suitable for most environments.", "label": "Blue" },
                  { "description": "Symbolizes growth, harmony, and renewal.", "label": "Green" },
                  { "description": "Type your own favorite color.", "label": "Other" }
                ]
              }
            ]
          }
        },
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfaaff539001jCeh626xIXgw9u",
        "messageID": "msg_bfaafefb3001iBSmqfzFffDjCS"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "step-finish",
        "tokens": { "input": 12775, "output": 150, "reasoning": 0, "cache": { "read": 0, "write": 0 } },
        "cost": 0,
        "reason": "tool-calls",
        "snapshot": "617ad65111b912d010a8ea89957a9c5986bc54f0",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01535001wSIZq9GBd5DM3p",
        "messageID": "msg_bfaafefb3001iBSmqfzFffDjCS"
      }
    }
  },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437392819 },
        "modelID": "gpt-4.1",
        "providerID": "github-copilot",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "tokens": { "input": 12775, "output": 150, "reasoning": 0, "cache": { "read": 0, "write": 0 } },
        "mode": "build",
        "id": "msg_bfaafefb3001iBSmqfzFffDjCS",
        "role": "assistant",
        "cost": 0,
        "path": {
          "root": "/home/francis/Projects/_nvim/opencode.nvim",
          "cwd": "/home/francis/Projects/_nvim/opencode.nvim"
        },
        "parentID": "msg_bfaafef41001700DjtCwvhFxse",
        "finish": "tool-calls",
        "agent": "build"
      }
    }
  },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437392819, "completed": 1769437402460 },
        "modelID": "gpt-4.1",
        "providerID": "github-copilot",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "tokens": { "input": 12775, "output": 150, "reasoning": 0, "cache": { "read": 0, "write": 0 } },
        "mode": "build",
        "id": "msg_bfaafefb3001iBSmqfzFffDjCS",
        "role": "assistant",
        "cost": 0,
        "path": {
          "root": "/home/francis/Projects/_nvim/opencode.nvim",
          "cwd": "/home/francis/Projects/_nvim/opencode.nvim"
        },
        "parentID": "msg_bfaafef41001700DjtCwvhFxse",
        "finish": "tool-calls",
        "agent": "build"
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437402477 },
        "modelID": "gpt-4.1",
        "providerID": "github-copilot",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "mode": "build",
        "cost": 0,
        "role": "assistant",
        "tokens": { "input": 0, "output": 0, "reasoning": 0, "cache": { "read": 0, "write": 0 } },
        "path": {
          "root": "/home/francis/Projects/_nvim/opencode.nvim",
          "cwd": "/home/francis/Projects/_nvim/opencode.nvim"
        },
        "parentID": "msg_bfaafef41001700DjtCwvhFxse",
        "id": "msg_bfab0156d001NyMxaTnj6Cml0c",
        "agent": "build"
      }
    }
  },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "model": { "providerID": "github-copilot", "modelID": "gpt-4.1" },
        "time": { "created": 1769437392705 },
        "role": "user",
        "summary": { "title": "Question with Other choice", "diffs": [] },
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "msg_bfaafef41001700DjtCwvhFxse",
        "agent": "build"
      }
    }
  },
  {
    "type": "session.updated",
    "properties": {
      "info": {
        "projectID": "29d43526f88157cd4edd071b899dd01f240b771b",
        "time": { "created": 1769437382680, "updated": 1769437402502 },
        "title": "New session - 2026-01-26T14:23:02.680Z",
        "version": "1.1.31",
        "directory": "/home/francis/Projects/_nvim/opencode.nvim",
        "slug": "sunny-planet",
        "id": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "summary": { "deletions": 0, "additions": 0, "files": 0 }
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "step-start",
        "snapshot": "617ad65111b912d010a8ea89957a9c5986bc54f0",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cd9001JINkAnbcXksgNO",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437404381 },
        "text": "Thank you",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      },
      "delta": " you"
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437404381 },
        "text": "Thank you! You chose \"Red\" as your favorite color",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      },
      "delta": " color"
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437404381 },
        "text": "Thank you! You chose \"Red\" as your favorite color. If you have a specific task, question,",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      },
      "delta": ","
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437404381 },
        "text": "Thank you! You chose \"Red\" as your favorite color. If you have a specific task, question, or want to see this preference used in an example",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      },
      "delta": " example"
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437404381 },
        "text": "Thank you! You chose \"Red\" as your favorite color. If you have a specific task, question, or want to see this preference used in an example or feature, please let me know how you'd like",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      },
      "delta": " like"
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437404381 },
        "text": "Thank you! You chose \"Red\" as your favorite color. If you have a specific task, question, or want to see this preference used in an example or feature, please let me know how you'd like to proceed",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      },
      "delta": " proceed"
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437404381 },
        "text": "Thank you! You chose \"Red\" as your favorite color. If you have a specific task, question, or want to see this preference used in an example or feature, please let me know how you'd like to proceed!",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      },
      "delta": "!"
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "text",
        "time": { "start": 1769437405694, "end": 1769437405694 },
        "text": "Thank you! You chose \"Red\" as your favorite color. If you have a specific task, question, or want to see this preference used in an example or feature, please let me know how you'd like to proceed!",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab01cdd001Y6UnA89vh364ZV",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      }
    }
  },
  {
    "type": "message.part.updated",
    "properties": {
      "part": {
        "type": "step-finish",
        "tokens": { "input": 874, "output": 47, "reasoning": 0, "cache": { "read": 12032, "write": 0 } },
        "cost": 0,
        "reason": "stop",
        "snapshot": "617ad65111b912d010a8ea89957a9c5986bc54f0",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "prt_bfab021ff001EzP7TpA5rv7aTl",
        "messageID": "msg_bfab0156d001NyMxaTnj6Cml0c"
      }
    }
  },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437402477 },
        "modelID": "gpt-4.1",
        "providerID": "github-copilot",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "tokens": { "input": 874, "output": 47, "reasoning": 0, "cache": { "read": 12032, "write": 0 } },
        "mode": "build",
        "id": "msg_bfab0156d001NyMxaTnj6Cml0c",
        "role": "assistant",
        "cost": 0,
        "path": {
          "root": "/home/francis/Projects/_nvim/opencode.nvim",
          "cwd": "/home/francis/Projects/_nvim/opencode.nvim"
        },
        "parentID": "msg_bfaafef41001700DjtCwvhFxse",
        "finish": "stop",
        "agent": "build"
      }
    }
  },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "time": { "created": 1769437402477, "completed": 1769437405729 },
        "modelID": "gpt-4.1",
        "providerID": "github-copilot",
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "tokens": { "input": 874, "output": 47, "reasoning": 0, "cache": { "read": 12032, "write": 0 } },
        "mode": "build",
        "id": "msg_bfab0156d001NyMxaTnj6Cml0c",
        "role": "assistant",
        "cost": 0,
        "path": {
          "root": "/home/francis/Projects/_nvim/opencode.nvim",
          "cwd": "/home/francis/Projects/_nvim/opencode.nvim"
        },
        "parentID": "msg_bfaafef41001700DjtCwvhFxse",
        "finish": "stop",
        "agent": "build"
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "message.updated",
    "properties": {
      "info": {
        "model": { "providerID": "github-copilot", "modelID": "gpt-4.1" },
        "time": { "created": 1769437392705 },
        "role": "user",
        "summary": { "title": "Question with Other choice", "diffs": [] },
        "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "id": "msg_bfaafef41001700DjtCwvhFxse",
        "agent": "build"
      }
    }
  },
  { "type": "session.idle", "properties": { "sessionID": "ses_4055037e7ffe7iiIdzWGnWwd0H" } },
  {
    "type": "session.updated",
    "properties": {
      "info": {
        "projectID": "29d43526f88157cd4edd071b899dd01f240b771b",
        "time": { "created": 1769437382680, "updated": 1769437405755 },
        "title": "New session - 2026-01-26T14:23:02.680Z",
        "version": "1.1.31",
        "directory": "/home/francis/Projects/_nvim/opencode.nvim",
        "slug": "sunny-planet",
        "id": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "summary": { "deletions": 0, "additions": 0, "files": 0 }
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  {
    "type": "session.updated",
    "properties": {
      "info": {
        "projectID": "29d43526f88157cd4edd071b899dd01f240b771b",
        "time": { "created": 1769437382680, "updated": 1769437405755 },
        "title": "Question with other choice for renderer_spec.lua",
        "version": "1.1.31",
        "directory": "/home/francis/Projects/_nvim/opencode.nvim",
        "slug": "sunny-planet",
        "id": "ses_4055037e7ffe7iiIdzWGnWwd0H",
        "summary": { "deletions": 0, "additions": 0, "files": 0 }
      }
    }
  },
  { "type": "custom.emit_events.finished", "properties": [] },
  { "type": "custom.emit_events.finished", "properties": [] }
]
